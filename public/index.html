<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Peta Rawan Narkoba - Tanjungpinang</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="/styles.css?v=6.4" />
</head>
<body>
  <nav class="top-nav">
    <div class="nav-container">
      <div class="nav-logo-section">
        <img class="nav-logo" src="/api/logo/image" id="logoImg" alt="Logo BNN" />
        <div class="nav-text">
          <h1 class="nav-title">Peta Rawan Narkoba</h1>
          <p class="nav-subtitle">BNN Kota Tanjungpinang</p>
        </div>
      </div>
    </div>
  </nav>

  <header class="banner-header">
    <div class="banner-container">
      <img id="bannerImg" class="banner-img" src="uploads/banner-default.jpg" alt="Banner BNN" />
      <div id="bannerCaption" class="caption">Informasi Area Rawan Narkoba - Kota Tanjungpinang</div>
    </div>
  </header>

  <main>
    <div id="map" style="height:600px; margin-top:30px;"></div>

    <!-- News Section (Moved to Bottom) -->
    <section class="news-section" style="margin-top:50px;">
      <h2 class="section-title">ðŸ“° Berita & Informasi Terkini</h2>
      
      <!-- Search Bar -->
      <div class="news-search-container">
        <input type="text" id="newsSearchInput" placeholder="ðŸ” Cari berita..." class="news-search-input" />
      </div>

      <!-- News Grid -->
      <div id="newsGrid" class="news-grid"></div>
      
      <!-- Show More Button -->
      <div style="text-align:center; margin-top:30px;">
        <button id="showMoreNews" class="btn btn-primary" style="display:none;">ðŸ“„ Lihat Berita Lainnya</button>
      </div>

      <!-- Empty State -->
      <div id="newsEmptyState" class="empty-state" style="display:none;">
        <p>Belum ada berita yang tersedia.</p>
      </div>
    </section>
  </main>

  <!-- News Detail Modal -->
  <div id="newsModal" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <div id="newsModalBody"></div>
    </div>
  </div>

  <script>
    // Force reload logo and banner with cache-busting timestamp from database
    document.getElementById('logoImg').src = '/api/logo/image?t=' + Date.now();
    document.getElementById('bannerImg').src = '/api/banner/image?t=' + Date.now();
  </script>

  <footer class="footer">
    <div class="footer-container">
      <p>&copy; 2025 Peta Rawan Narkoba - Tanjungpinang</p>
      <p style="font-size:0.85rem;color:#999;">Informasi untuk kepentingan publik</p>
      <p class="footer-contact">
        <span>Telepon: <a href="tel:+6281275405434">+62 812-7540-5434</a></span>
        <span>Email: <a href="mailto:bnnkota_tanjungpinang@bnn.go.id">bnnkota_tanjungpinang@bnn.go.id</a></span>
      </p>
    </div>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="/app.js?v=6.4"></script>
</body>
</html>
